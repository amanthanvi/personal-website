---
// Fixed top bar showing scroll progress
---

<div
  id="scroll-progress"
  class="fixed top-0 left-0 z-50 h-0.5 bg-gradient-to-r from-accent-hero via-accent-projects to-accent-blog transition-[width] duration-150"
  style="width: 0%"
  role="progressbar"
  aria-label="Page scroll progress"
  aria-valuenow="0"
  aria-valuemin="0"
  aria-valuemax="100"
/>

<script>
  function initScrollProgress() {
    const bar = document.getElementById('scroll-progress');
    if (!bar) return;

    const update = () => {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const pct = docHeight > 0 ? Math.min((scrollTop / docHeight) * 100, 100) : 0;
      bar.style.width = `${pct}%`;
      bar.setAttribute('aria-valuenow', String(Math.round(pct)));
    };

    window.addEventListener('scroll', update, { passive: true });
    update();
  }

  document.addEventListener('astro:page-load', initScrollProgress);
  initScrollProgress();
</script>
