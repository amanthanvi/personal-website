---
interface Props {
  text: string;
  tag?: 'h1' | 'h2' | 'h3' | 'span' | 'p';
  class?: string;
}

const { text, tag: Tag = 'span', class: className = '' } = Astro.props;
---

<Tag
  class:list={['glitch-text relative inline-block', className]}
  data-text={text}
>
  {text}
</Tag>

<style>
  .glitch-text {
    position: relative;
  }

  .glitch-text::before,
  .glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    opacity: 0;
  }

  .glitch-text:hover::before {
    animation: glitch-top 0.4s ease-in-out;
    opacity: 0.8;
    color: oklch(0.78 0.15 194);
    clip-path: inset(0 0 50% 0);
  }

  .glitch-text:hover::after {
    animation: glitch-bottom 0.4s ease-in-out;
    opacity: 0.8;
    color: oklch(0.7 0.2 330);
    clip-path: inset(50% 0 0 0);
  }

  @keyframes glitch-top {
    0%, 100% { transform: translate(0); }
    20% { transform: translate(-2px, -1px); }
    40% { transform: translate(2px, 1px); }
    60% { transform: translate(-1px, 2px); }
  }

  @keyframes glitch-bottom {
    0%, 100% { transform: translate(0); }
    20% { transform: translate(2px, 1px); }
    40% { transform: translate(-2px, -1px); }
    60% { transform: translate(1px, -2px); }
  }

  @media (prefers-reduced-motion: reduce) {
    .glitch-text::before,
    .glitch-text::after {
      display: none;
    }
  }
</style>
